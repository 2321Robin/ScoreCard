# 打牌积分表单

轻量的线下打牌记分网页，移动端友好，支持撤销/重做、自动平衡、导出 CSV，并自动本地保存数据。

## 当前特性
- 玩家管理：默认 4 人（玩家 A/B/C/D），2-8 人可增删改，自动同步各局列。
- 录入方式：先在“新增一局”模块填写分值（文本输入可直接键入，旁边下拉可选），再添加到对局记录；已保存的行需点“编辑”进入修改，再“保存/取消”。
- 分值范围：默认 -10~10，可自定义上下限，自动刷新下拉选项。
- 平衡校验：每局分值和必须为 0；提供自动平衡（用最后一位补齐差值）；失衡行醒目标记。
- 撤销/重做：最多 50 步；清空需二次确认。
- 总分汇总：实时汇总各玩家总分并标记领先。
- 导出 CSV：含时间戳、玩家列、每局分值、逐局累计总分列、总分行；UTF-8 BOM 兼容 Excel；文件名 `scores-YYYYMMDD-HHMM.csv`。
- 持久化：localStorage 自动保存玩家与对局数据，刷新不丢失。
- 主题：浅色柔和配色（surface #f7f6f1 / panel #ffffff / accent #7fb37a / text #2f3128 / muted #6f7664 / danger #e25b5b）。
- 无障碍：aria-label、aria-invalid、skip link、键盘可操作；焦点态可见。

## 使用说明
1) 新增一局：在“新增一局”区域为每个玩家输入或下拉选择分值，可点“自动平衡”补齐，确认后点“添加本局”。
2) 编辑/删除：在记录表中点击“编辑”进入可改状态，改完点“保存”或“取消”；可删除整局。
3) 撤销/重做：顶部按钮可回溯/恢复最近 50 步操作。
4) 导出：点击“导出 CSV”，下载含逐局累计的表格文件。
5) 自定义分值范围：在新增区域设置上下限并“更新范围”，下拉选项随之刷新。

## 开发与运行
```bash
npm install
npm run dev     # 开发
npm run build   # 生产构建
npm run preview # 本地预览构建
npm run test:run
```

## 技术栈
- Vite + React + Tailwind CSS
- 测试：Vitest + Testing Library
- 状态：组件内 useState + useMemo；localStorage 持久化

## 已知不做/待办
- CSV 导入暂未实现（仅导出）。
- 复制上一行入口已移除，若需要可后续按需恢复。
